{% extends './base.html' %}

{% block content %}
<link href="{{ request.app.url_path_for('static', path='/style/live.css') }}" rel="stylesheet">

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item"><a href="/{{ username }}">{{ username | title }}</a></li>
        <li class="breadcrumb-item active">{{ title }}</li>
    </ol>
</nav>

<div class="card mb-4 live-card-title">
    <div class="card-body">
        <h5 class="card-title">Match {{ username | title }} </h5>
        <h1>
            {{ title }}
            {% if title.startswith('Live') %}
                <lord-icon
                    src="https://cdn.lordicon.com/qhgmphtg.json"
                    trigger="hover"
                    style="width:70px;height:70px">
                </lord-icon>
            {% elif title.startswith('Finished') %}
                <lord-icon
                    src="https://cdn.lordicon.com/lupuorrc.json"
                    trigger="hover"
                    style="width:70px;height:70px">
                </lord-icon>
            {% else %}
                <lord-icon
                    src="https://cdn.lordicon.com/iltqorsz.json"
                    trigger="hover"
                    style="width:70px;height:70px">
                </lord-icon>
            {% endif %}
        </h1>
    </div>
</div>
<div class="row">
    {% for player in players %}
        <div class="col-lg-6 mb-3">
            {% if player.rating_updates > 0 %}
            <div href="/{{ player.id }}" class="card live-card win-card">
            {% elif player.rating_updates < 0 %}
            <div href="/{{ player.id }}" class="card live-card loss-card">
            {% else %}
            <div href="/{{ player.id }}" class="card live-card">
            {% endif %}
                <div class="card-body">
                    <a href="/{{ player.id }}" class="h1 card-title stretched-link">{{ player.username }}</a>
                    <div class="row">
                        <div class="col-lg-4"><h4>{{ player.total_win }} <small class="text-muted">wins</small></h4></div>
                        <div class="col-lg-4"><h4>{{ player.total_win_percentage }}<small class="text-muted">%</small></h4></div>
                        <div class="col-lg-4"><h4>{{ player.total_ringouts }} <small class="text-muted">ringouts</small></h4></div>
                    </div>
                    <h4><small class="text-muted">{% if title.startswith('Finished') %}Played: {% else %}Best character:{% endif %}</small> {{ player.char }} <small class="text-dark">{{ player.score }}</small></h4>
                    <img class="mb-3" width="150px" src="{{ request.app.url_path_for('static', path='/characters/'+player.char+'.png') }}" alt="{{ player.char }}">
                    <div class="row">
                        {% if player.rating_updates > 0 %}
                            <div class="col-lg-5"><h3>{{ player.rating }} <small class="text-success">+{{ player.rating_updates }}</small><small class="text-muted"> mmr</small></h3></div>
                        {% elif player.rating_updates < 0 %}
                            <div class="col-lg-5"><h3>{{ player.rating }} <small class="text-danger">{{ player.rating_updates }}</small><small class="text-muted"> mmr</small></h3></div>
                        {% else %}
                            <div class="col-lg-5"><h3>{{ player.rating }}<small class="text-muted">mmr</small></h3></div>
                        {% endif %}
                        <div class="col-lg-7"><h3><small class="text-muted">Char rank:</small> {{ player.rank }}<small class="text-muted"> #</small></h3></div>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
</div>

{% endblock %}